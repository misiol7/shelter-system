services:
 postgres:
  image: postgres:15
  environment:
   POSTGRES_PASSWORD: postgres
   POSTGRES_DB: shelter
  volumes:
   - pgdata:/var/lib/postgresql/data

 backend:
  build: ./backend
  depends_on:
   - postgres

 frontend:
  build: ./frontend
  depends_on:
   - backend

 caddy:
  image: caddy:latest
  ports:
   - "80:80"
  volumes:
   - ./caddy/Caddyfile:/etc/caddy/Caddyfile
  depends_on:
   - frontend

volumes:
 pgdata:
